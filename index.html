<!doctype html>
<html lang="ar-KW" dir="rtl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    
    <!-- SEO: عنوان وصفي للصفحة الرئيسية -->
    <title>المتجر الكويتي - أحدث المنتجات والعروض في الكويت</title>
    
    <!-- SEO: وصف تعريفي جذاب -->
    <meta name="description" content="اكتشف أفضل العروض على الإلكترونيات، الأدوات المنزلية، ومستلزمات العناية الشخصية في المتجر الكويتي. تسوق الآن واستمتع بأسعار تنافسية في الكويت.">
    
    <!-- SEO: تحديد الرابط الأساسي للصفحة -->
    <link rel="canonical" href="https://sherow1982.github.io/Kuwait-matjar/">

    <link rel="stylesheet" href="./woodmart-lite.css">
    <link rel="icon" href="./favicon.ico">
</head>
<body>
    <header class="header">
        <div class="header__inner container">
            <a href="/" class="header__logo"><h1>المتجر الكويتي</h1></a>
            <div class="header__spacer"></div>
        </div>
    </header>
    <main class="section">
        <div id="products-container" class="container">
            <!-- المنتجات ستُعرض هنا -->
        </div>
    </main>
    <footer class="footer">
        <div class="container footer__bottom">
            <p>© 2025 المتجر الكويتي - جميع الحقوق محفوظة</p>
        </div>
    </footer>
    <script type="module">
        // باقي الكود كما هو بدون تغيير
        const DATA_URL = 'https://raw.githubusercontent.com/sherow1982/Kuwait-matjar/refs/heads/main/data/products-template.json?raw=1';
        const container = document.getElementById('products-container');
        const slugify = (text) => text ? text.toString().toLowerCase().trim().replace(/\s+/g, '-').replace(/[^\u0600-\u06FFa-z0-9-]/g, '').replace(/-+/g, '-') : '';
        const createProductCard = (p = {}) => {
            const title = p['العنوان'] || '';
            const image = p['رابط الصورة'] || '';
            const productSlug = slugify(title);
            const productPageLink = `./product.html?name=${productSlug}`;
            const salePriceNum = parseFloat(String(p['السعر المخفّض']).replace(/[^0-9.]/g, ''));
            const regularPriceNum = parseFloat(String(p['السعر']).replace(/[^0-9.]/g, ''));
            const currentPriceHTML = new Intl.NumberFormat('ar-KW', { style: 'currency', currency: 'KWD' }).format(salePriceNum || regularPriceNum);
            const oldPriceHTML = salePriceNum ? `<s>${new Intl.NumberFormat('ar-KW', { style: 'currency', currency: 'KWD' }).format(regularPriceNum)}</s>` : '';
            let saleBadge = '';
            if (salePriceNum && regularPriceNum > salePriceNum) {
                const discount = Math.round(((regularPriceNum - salePriceNum) / regularPriceNum) * 100);
                saleBadge = `<span class="product__badge">-${discount}%</span>`;
            }
            return `<div class="product"><a href="${productPageLink}" target="_blank" rel="noopener noreferrer" class="product__media">${saleBadge}<img src="${image}" alt="${title}" loading="lazy" decoding="async"></a><div class="product__body"><h3><a href="${productPageLink}" target="_blank" rel="noopener noreferrer">${title}</a></h3><div class="price">${oldPriceHTML}<span>${currentPriceHTML}</span></div></div></div>`;
        };
        (async () => {
            try {
                const res = await fetch(DATA_URL);
                const items = await res.json();
                if (container && items?.length) container.innerHTML = `<div class="products">${items.map(createProductCard).join('')}</div>`;
            } catch (e) { console.error(e); }
        })();
    </script>
</body>
</html>
